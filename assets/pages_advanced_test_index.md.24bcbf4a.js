import{_ as s,o as a,c as n,a as l}from"./app.388c05f4.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"mocha","slug":"mocha","link":"#mocha","children":[{"level":3,"title":"快速上手","slug":"快速上手","link":"#快速上手","children":[]},{"level":3,"title":"出现 Cannot use import statement outside a module","slug":"出现-cannot-use-import-statement-outside-a-module","link":"#出现-cannot-use-import-statement-outside-a-module","children":[]},{"level":3,"title":"新写法","slug":"新写法","link":"#新写法","children":[]}]},{"level":2,"title":"jest","slug":"jest","link":"#jest","children":[]}],"relativePath":"pages/advanced/test/index.md","lastUpdated":1722918563000}'),e={name:"pages/advanced/test/index.md"},o=l(`<h2 id="mocha" tabindex="-1">mocha <a class="header-anchor" href="#mocha" aria-hidden="true">#</a></h2><p><a href="https://mochajs.org/" target="_blank" rel="noreferrer">官网地址</a> <a href="https://developer.aliyun.com/article/979925" target="_blank" rel="noreferrer">文章</a></p><h3 id="快速上手" tabindex="-1">快速上手 <a class="header-anchor" href="#快速上手" aria-hidden="true">#</a></h3><ol><li>安装</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">npm install </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;">save</span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;">dev mocha</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>写入测试文件</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// $ mkdir test</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// test.js</span></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#BABED8;"> assert </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">require</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">assert</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Array</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">function</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">describe</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">#indexOf()</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">should return -1 when the value is not present</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#BABED8;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#F07178;">([</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">indexOf</span><span style="color:#F07178;">(</span><span style="color:#F78C6C;">4</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>配置命令</li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#BABED8;">package</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">json</span></span>
<span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">mocha</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><ol start="4"><li>运行 npm test</li></ol><h3 id="出现-cannot-use-import-statement-outside-a-module" tabindex="-1">出现 Cannot use import statement outside a module <a class="header-anchor" href="#出现-cannot-use-import-statement-outside-a-module" aria-hidden="true">#</a></h3><ul><li>使用 babel 进行转 node 不支持 esModule</li><li>项目安装 npm install --save babel-core &amp; npm install --save babel-preset-env 或者 npm install --save babel-preset-es2015</li><li>根目录下新建.babelrc 写入</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">presets</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: [</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">es2015</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">env</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">    ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">plugins</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">: []</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>命令配置 <ul><li>&quot;test&quot;: &quot;mocha test --compilers js:babel-core/register&quot;</li></ul></li></ul><h3 id="新写法" tabindex="-1">新写法 <a class="header-anchor" href="#新写法" aria-hidden="true">#</a></h3><p>将 <code>mocha test --compilers js:babel-core/register</code> 更改为 <code>mocha test --require @babel/register</code>。这样，您可以在运行 Mocha 测试时使用 Babel 进行编译。但是，这需要安装 @babel/register 和 @babel/core，您可以使用以下命令安装相应依赖项：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#babed8;">npm install --save-dev @babel/register @babel/core</span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre></div><p>这个修改是因为在 Babel 7.x 中，已经弃用了 &quot;babel-core&quot;，并引入了名为 &quot;@babel/core&quot; 的新组件。同时，Mocha 也更新了，已不再使用 &quot;--compilers&quot; 选项，而是通过 &quot;--require&quot; 选项继续支持 Babel。</p><h2 id="jest" tabindex="-1">jest <a class="header-anchor" href="#jest" aria-hidden="true">#</a></h2><p><a href="https://jestjs.io/zh-Hans/docs/getting-started" target="_blank" rel="noreferrer">官网地址</a></p>`,20),p=[o];function t(c,r,i,F,y,D){return a(),n("div",null,p)}const h=s(e,[["render",t]]);export{u as __pageData,h as default};
